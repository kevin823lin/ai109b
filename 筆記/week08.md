# 第八周筆記

## 電腦下棋

* 電腦記憶力很強，規則複雜對電腦沒什麼影響

* 兩個主要關鍵算法

  * 盤面評估函數(不僅自己的,對方的也很重要)

  * 搜尋很多層對局 - 尋找最不容易被打敗的下法

### 實作

* 執行 `gomoku.py`

    > 參數 P：People
    >
    > 參數 C：Computer

    ```text
    PS D:\檔案\課程\1092\人工智慧\ai\11-chess\01-gomoku> python .\gomoku.py C C
      0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - - - - - - - - - 6
    7 - - - - - - - - - - - - - - - - 7
    8 - - - - - - - - - - - - - - - - 8
    9 - - - - - - - - - - - - - - - - 9
    a - - - - - - - - - - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - - - - - - - - - 6
    7 - - - - - - - - - - - - - - - - 7
    8 - - - - - - - - o - - - - - - - 8
    9 - - - - - - - - - - - - - - - - 9
    a - - - - - - - - - - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - - - - - - - - - 6
    7 - - - - - - - - - - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - - - - - - - - - 9
    a - - - - - - - - - - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - - - - - - - - - 6
    7 - - - - - - - - - - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o - - - - - - - 9
    a - - - - - - - - - - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - - - - - - - - - 6
    7 - - - - - - - - - - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o - - - - - - - 9
    a - - - - - - - - x - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - - - - - - - - - 6
    7 - - - - - - - - o - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o - - - - - - - 9
    a - - - - - - - - x - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x - - - - - - - 6
    7 - - - - - - - - o - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o - - - - - - - 9
    a - - - - - - - - x - - - - - - - a
    b - - - - - - - - - - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x - - - - - - - 6
    7 - - - - - - - - o - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o - - - - - - - 9
    a - - - - - - - - x - - - - - - - a
    b - - - - - - - - o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x - - - - - - - 6
    7 - - - - - - - - o - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o x - - - - - - 9
    a - - - - - - - - x - - - - - - - a
    b - - - - - - - - o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x - - - - - - - 6
    7 - - - - - - - - o - - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o x - - - - - - 9
    a - - - - - - - - x o - - - - - - a
    b - - - - - - - - o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x - - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o x - - - - - - 9
    a - - - - - - - - x o - - - - - - a
    b - - - - - - - - o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x o - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x - - - - - - 8
    9 - - - - - - - - o x - - - - - - 9
    a - - - - - - - - x o - - - - - - a
    b - - - - - - - - o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x o - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x x - - - - - 8
    9 - - - - - - - - o x - - - - - - 9
    a - - - - - - - - x o - - - - - - a
    b - - - - - - - - o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x o - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x x - - - - - 8
    9 - - - - - - - - o x - - - - - - 9
    a - - - - - - - - x o - - - - - - a
    b - - - - - - - o o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x o - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x x - - - - - 8
    9 - - - - - - - - o x - x - - - - 9
    a - - - - - - - - x o - - - - - - a
    b - - - - - - - o o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - - - - - - - - - - 5
    6 - - - - - - - - x o - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x x - - - - - 8
    9 - - - - - - - - o x - x - - - - 9
    a - - - - - - - - x o - - o - - - a
    b - - - - - - - o o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    0 - - - - - - - - - - - - - - - - 0
    1 - - - - - - - - - - - - - - - - 1
    2 - - - - - - - - - - - - - - - - 2
    3 - - - - - - - - - - - - - - - - 3
    4 - - - - - - - - - - - - - - - - 4
    5 - - - - - - - x - - - - - - - - 5
    6 - - - - - - - - x o - - - - - - 6
    7 - - - - - - - - o x - - - - - - 7
    8 - - - - - - - - o x x - - - - - 8
    9 - - - - - - - - o x - x - - - - 9
    a - - - - - - - - x o - - o - - - a
    b - - - - - - - o o - - - - - - - b
    c - - - - - - - - - - - - - - - - c
    d - - - - - - - - - - - - - - - - d
    e - - - - - - - - - - - - - - - - e
    f - - - - - - - - - - - - - - - - f
    0 1 2 3 4 5 6 7 8 9 a b c d e f
    x 贏了！
    ```

## 強化電腦棋力

* Min-Max 對局搜尋法

  * 電腦下棋要夠強大，通常必須採用「Min-Max 對局搜尋法」，如果能夠搜尋得愈深，電腦的棋力通常就會越高。

  * 將所有層次分為「敵我雙方」兩類，我方下的那層得分越多越好，而對方下的那層失分越少越好。

  * 避免組合爆炸（256!種可能）的問題，可以採用著名的「 Alpha-Beta Cut」修剪法來減少蒐尋的空間大小
  
  ![圖、Min-Max 對局搜尋法的範例](../img/Minimax.jpg)

* 可以看到 Min-Max 對每個節點都進行遞迴展開，這種展開的數量是很龐大的，因此即使電腦非常快也展開不了幾層，所以我們必須透過「Alpha-Beta 修剪法」減少展開的數量，以下是一個範例。

  ![圖、 Alpha-Beta 修剪法的範例](../img/AlphaBetaExample.jpg)

## 參考資料

* <https://gitlab.com/ccc109/ai/-/blob/master/11-chess/02-Min-Max%E5%B0%8D%E5%B1%80%E6%90%9C%E5%B0%8B%E6%B3%95.md>

* <https://gitlab.com/ccc109/ai/-/blob/master/11-chess/04-Alpha-Beta%E4%BF%AE%E5%89%AA%E6%B3%95.md>
